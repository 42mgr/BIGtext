<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Text</title>
    <style>
        body {
            background-color: black;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            text-align: center;
            overflow: hidden; /* Prevent scrolling */
        }

        h1 {
            margin: 0;
            white-space: pre-wrap; /* Preserve whitespace and line breaks */
            word-break: break-word; /* Allow breaking at words */
        }

        #debug-overlay {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0,0,0,0.7);
            color: white;
            padding: 5px;
            border-radius: 5px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1 id="responsive-text" contenteditable="true">Responsive Text asdf asdf asdf sadfasd asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf asdf</h1>
    <div id="debug-overlay">Font Size: 1000px</div>
    <script>
        function adjustFontSize() {
            const element = document.getElementById('responsive-text');
            const debugOverlay = document.getElementById('debug-overlay');
            const parent = element.parentElement;
            const parentWidth = parent.clientWidth;
            const parentHeight = parent.clientHeight;
            let fontSize = 1000; // Start with a large font size
            element.style.fontSize = fontSize + 'px';

            // Decrease font size until it fits within the container
            while (element.scrollWidth > parentWidth || element.scrollHeight > parentHeight) {
                fontSize--;
                element.style.fontSize = fontSize + 'px';
            }

            // Try adding newlines to see if it results in a larger font size
            const originalText = element.innerText;
            const words = originalText.split(' ');
            let bestText = originalText;
            let bestFontSize = fontSize;

            for (let i = 1; i < words.length; i++) {
                const newText = words.slice(0, i).join(' ') + '\n' + words.slice(i).join(' ');
                element.innerText = newText;
                element.style.fontSize = fontSize + 'px';

                // Decrease font size until it fits within the container
                while (element.scrollWidth > parentWidth || element.scrollHeight > parentHeight) {
                    fontSize--;
                    element.style.fontSize = fontSize + 'px';
                }

                // If the new font size is larger, keep the new text
                if (fontSize > bestFontSize) {
                    bestText = newText;
                    bestFontSize = fontSize;
                }
            }

            // Set the best text and font size
            element.innerText = bestText;
            element.style.fontSize = bestFontSize + 'px';

            debugOverlay.innerText = `Font Size: ${bestFontSize}px`;
            // Preserve cursor position
            const range = document.createRange();
            const sel = window.getSelection();
            range.setStart(element.childNodes[0], bestText.length);
            range.collapse(true);
            sel.removeAllRanges();
            sel.addRange(range);

        }

        window.addEventListener('resize', adjustFontSize);
        window.addEventListener('load', adjustFontSize);
        document.getElementById('responsive-text').addEventListener('input', adjustFontSize);
    </script>
</body>
</html>